---
description: 当当电子书
---

# Redis开发与运维-note

## 1 初识Redis

1、常见的数据结构：字符串、哈希、列表、集合、有序集合。 然后在字符串的基础上演变出了位图、hyperLogLog ，并且随着LBS 的发展，加入了GEO\(地理信息定位\)的功能。

2、基础数据操作之外，还有如下额外的功能：

* 键过期功能，可以实现缓存
* 发布订阅功能，实现消息系统
* 支持Lua 脚本功能，利用Lua 创造出新的Redis 命令
* 简单的事务特性
* 流水线（pipeline）功能

3、持久化 RDB 和 AOF

4、复制功能，实现了多个相同数据的Redis副本。

5、提供了Redis sentinel，能够保证Redis节点的故障发现和故障自动转移。



## 2  API 的理解和使用

### 2.1 预备

1、查看所有键：需要遍历所有的键，O\(n\), 所以当保存了大量键时，线上环境禁止使用。

```text
keys *
```

2、键总数：

```text
dbsize
```

3、检查键是否存在：

```text
exists key
```

4、删除键

```text
del key

del key1 key2 ...
```

5、键过期

```text
expire key seconds
```

查看剩余时间：ttl

```text
ttl key
```

6、查看key 的数据结构类型\(常见的对外五种：string， hash, list, set, zset\)

```text
type key
```

![5&#x79CD;&#x5BF9;&#x5916;&#x5448;&#x73B0;&#x7684;&#x6570;&#x636E;&#x7ED3;&#x6784;](../.gitbook/assets/image%20%2873%29.png)

7、查看key 的内部编码

```text
object encoding key 
```

![&#x6570;&#x636E;&#x7ED3;&#x6784;&#x4E0E;&#x5185;&#x90E8;&#x7F16;&#x7801;](../.gitbook/assets/image%20%2872%29.png)

8、单线程架构  
\`单线程 + IO多路复用 = 高性能\`

所有的客户端请求，到达服务端之后，都需要先进入队列，进行排队。不存在被同时执行的情况。

 9、单线程每秒万级别的处理能力，原因是：

* 1、纯内存访问 
* 2、非阻塞I/O, 使用epoll 作为I/O 多路复用技术的实现，不在网络I/O上浪费过多的时间。 
* 3、单线程避免了线程切换和竞态产生的消耗

单线程的缺陷：

> 如果某个命令的执行时间过长，会造成其他命令的阻塞。



### 2.2 字符串

1、字符串类型的实际值可以是字符串、数字、二进制等等。最大不超过512M。

2、设置：

```text
set key value [ex seconds] [px milliseconds] [nx|xx]

解释：

```

3、

### 2.3 哈希

### 

### 2.4 列表

### 

### 2.5 集合

### 

### 2.6 有序集合

### 

### 2.7 键管理

###  

## 3 小功能大用处



## 4 

