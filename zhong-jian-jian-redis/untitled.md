---
description: 'https://juejin.cn/book/6844733724618129422  文章读书笔记，迅速理解redis 的核心。'
---

# Redis 深度历险-笔记

## 1、redis 数据结构：

### 1.1 string: 动态字符串，

内部结构实现上类似于Java的arrayList, 采用预分配冗余空间的方式来减少内存的频繁分配。  


### 1.2 list： 

相当于Java里面的linkedList, 链表，插入和删除很快，但是索引很慢。

### 1.3 set：

相当于Java里面的hashset。 内部的键值对是无序的、唯一的。它的内部实现相当于一个特殊的字典，字典中所有的value 都是一个值NULL。





### 1.4 hash：

类似于Java中的hashmap。 数组+链表 二维结构。不同的是redis的字典的值只能是字符串，另外rehash 的方式也不一样，Java rehash 需要一次性全部rehash, 而redis 为了高性能，不能阻塞服务，所以采用了渐进式rehash策略。

```text
渐进式 rehash 会在 rehash 的同时，保留新旧两个 hash 结构，
查询时会同时查询两个 hash 结构，
然后在后续的定时任务中以及 hash 操作指令中，循序渐进地将旧 hash 的内容一点点迁移到新的 hash 结构中。
当搬迁完成了，就会使用新的hash结构取而代之。
```

hash 与 string的区别：

```text
hash 结构也可以用来存储用户信息，不同于字符串一次性需要全部序列化整个对象，hash 可以对用户结构中的每个字段单独存储。
这样当我们需要获取用户信息时可以进行部分获取。
而以整个字符串的形式去保存用户信息的话就只能一次性全部读取，这样就会比较浪费网络流量。
```

### 1.5 zset

类似于Java的SortedSet 和 HashMap 的结合体，一方面他是set ，保证了唯一性，另一方面他可以给每一个value 赋予一个score，代表这个value 的排序权重。内部实现使用了一种 跳跃列表。



## 2 容器型数据结构的两个原则：

1、没有则创建

2、没有元素了则销毁。

## 3 



