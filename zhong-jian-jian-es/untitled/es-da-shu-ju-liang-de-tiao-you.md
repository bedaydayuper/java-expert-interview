# ES 大数据量的调优

## 0  调优参数不适用

说实话，ES 性能优化是没有银弹的。啥意思呢？就是不要期待着随手调一个参数，就可以万能的应对所有的性能慢的场景。



## 1 filesystem

![](../../.gitbook/assets/image%20%2822%29.png)



ES 的搜索引擎严重依赖于底层的 Filesystem Cache，你如果给 Filesystem Cache 更多的内存，尽量让内存可以容纳所有的 IDX Segment File 索引数据文件，那么你搜索的时候就基本都是走内存的，性能会非常高。

归根结底，你要让 ES 性能好，最佳的情况下，就是你的机器的内存，至少可以容纳你的总数据量的一半。



## 2 数据预热

每隔一段时间，将热数据 手动在后台查询一遍，将热数据刷新到fileSystem cache上。

## 3 冷热分离

将热数据单独建立一个索引。

## 4 document 设计

在使用es时 避免使用复杂的查询语句（Join 、聚合），就是在建立索引时， 就根据查询语句建立好对应的元数据。

## 5 **分页性能优化**

> #### **千万不要深分页。可以采用scroll。或者search after 方案**

## 参考文献：

[https://juejin.cn/post/6844903855746973703](https://juejin.cn/post/6844903855746973703)  
[https://aijishu.com/a/1060000000095403](https://aijishu.com/a/1060000000095403)

