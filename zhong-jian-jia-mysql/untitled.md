# Mysql 基础

## 1 客户端与服务器连接

（1）tcp/ip

（2）套接字

## 2   服务器处理客户端请求

![&#x5904;&#x7406;&#x6D41;&#x7A0B;](../.gitbook/assets/image%20%28135%29.png)

### 2.1 连接管理

通过tcp/ip 或者套接字 连接，连接管理过程中，会使用线程池进行连接复用。在连接过程中需要身份认证等操作。

### 2.2 解析与优化

#### 2.2.1 查询缓存

缓存查询的结果，但是涉及到更新、或者表结构变更时，会从缓存中删除。

缓存虽然能够提高查询性能，但是需要维护额外开销，8.0 已经删除了。

#### 2.2.2 语法解析（涉及词法、语法、语义分析等）

1、对客户端传入的文本进行解析，判断请求的语法是否正确

2、从将要查询的表、各种查询条件都提取出到MySQL服务器内部使用的一些数据结构上来。

#### 2.2.3 查询优化（此时并没有真正访问数据表）

获得了需要的信息，MySQL会进行优化，结果是生成一个执行计划。这个计划表明使用了哪些索引进行查询，表之间连接顺序等。

### 2.3 存储引擎 

MySQL 服务器把数据的存储和提取操作都封装到存储引擎中。

怎么从表中读取数据，怎么把数据写入具体的物理存储器上，都是存储引擎干的事情。

`连接管理、查询缓存、语法解析、查询优化`并不涉及存储引擎，被分为`MySQL server` 做的事情。`真实存取数据`的功能划分为 `存储引擎` 的功能。

